title = "Account"
url = "/account"
layout = "default"
is_hidden = 0

[account]
redirect = "home"
paramCode = "code"
forceSecure = 0
==
<?php
public function onCheckEmail()
{
    return ['isTaken' => Auth::findUserByLogin(post('email')) ? 1 : 0];
}
?>
==
<div class="container">
<h2>Registration</h2>
<div class="divider"></div>
<p class="flow-text">{{ description }}</p>


<div class="row">
        <div class="col s12 m5 l5">
            <h3>Register</h3>
            <form data-request="onRegister">

                <div class="input-field">
                    <i class="material-icons prefix">email</i>
              
                    <input name="email" 
                        type="email" class="validate"  
                        data-request="onCheckEmail" 
                        data-request-success="$('#loginTaken').toggle(!!data.isTaken)" 
                        data-track-input>

                    <label for="email" data-error="wrong" data-success="right">Email address</label>
                </div>
                <div class="input-field">
                    <i class="material-icons prefix">account_circle</i>
                    <input name="name" type="text" class="validate">
                    <label>Full Name</label>
                </div>
                <div class="input-field ">
                    <i class="material-icons prefix">vpn_key</i>
                    <input name="password" type="password" class="validate">
                    <label>Password</label>
                </div>
                <button class="btn waves-effect waves-light right" type="submit">REGISTER
                    <i class="material-icons right">person_add</i>
                </button>
            </form>

        </div>
        
    <div class="col m2 l2"></div>
    
        <div class="col s12 m5 l5">
            <h3>Sign in</h3>
            <form id="login" data-request="onSignin">

                <div class="input-field">
                    <i class="material-icons prefix">email</i>

                    <input name="email" type="email" class="validate" >
                    <label for="email" data-error="wrong" data-success="right">Email address</label>
                </div>
                <div class="input-field">
                    <i class="material-icons prefix">vpn_key</i>
                    <input name="password" type="password" class="validate">
                    <label>Password</label>
                </div>
                <p> <a href="{{ 'resetpassword' | page }}">Password Recovery</a></p>
                
                <button class="btn waves-effect waves-light right" type="submit">SIGN ON
                    <i class="material-icons right">person</i>
                </button>
            </form>

        </div>

</div>
</div>